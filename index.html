<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PDF to Image | Hacker Green</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<style>
body{
  background:#000;
  color:#00ff55;
  font-family:monospace;
  display:flex;
  justify-content:center;
  min-height:100vh;
}
.container{
  width:95%;
  max-width:900px;
  border:2px solid #00ff55;
  padding:20px;
  margin-top:20px;
}
h1{text-align:center;margin-bottom:5px;}

/* ===== INTRO ===== */
.intro{text-align:center;margin:10px 0 15px;}
.terminal-line{
  font-size:14px;letter-spacing:2px;opacity:.8;
  animation:blink 1.2s infinite;
}
@keyframes blink{50%{opacity:.4;}}
.tagline{margin-top:8px;font-size:13px;line-height:1.6;opacity:.75;}
.tagline span{color:#00ff99;}
.divider{
  height:1px;
  background:linear-gradient(to right,transparent,#00ff55,transparent);
  margin:15px 0;
}

/* ===== BUTTONS ===== */
.choose-btn{
  width:180px;height:42px;
  border-radius:22px;
  border:1px solid #00ff55;
  margin:10px auto;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;background:#000;
}
.choose-btn:hover{background:#001a00;}

button{
  background:#000;color:#00ff55;
  border:1px solid #00ff55;
  padding:8px 14px;margin:6px;
}
button:hover{background:#00ff55;color:#000;cursor:pointer;}

#proceedBtn{
  width:260px;height:46px;
  font-size:15px;letter-spacing:2px;font-weight:bold;
  border-radius:30px;margin:14px auto;display:block;
  background:#000;border:1.5px solid #00ff55;
}
#proceedBtn:hover{background:#00ff55;color:#000;}

.hidden{display:none;}
.popup{
  text-align:center;border:1px solid #00ff55;
  padding:8px;margin-top:10px;
}

/* ===== SPINNER ===== */
.spinner{
  width:45px;height:45px;margin:20px auto;
  border:3px solid #003300;border-top:3px solid #00ff55;
  border-radius:50%;animation:spin .6s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg);}}

/* ===== RESULT ===== */
#output{
  text-align:center;
}

/* ðŸ”¥ CANVAS BOX (AUTO FIT) ðŸ”¥ */
.page{
  display:inline-block;        /* <<< main fix */
  border:1px dashed #00ff55;
  padding:10px;
  margin:15px auto;
}

/* Canvas size control */
canvas{
  max-width:260px;
  max-height:380px;
  width:auto;
  height:auto;
  display:block;
  margin:0 auto;
  border:1px solid #00ff55;
}

/* Mobile */
@media(max-width:600px){
  canvas{
    max-width:220px;
    max-height:320px;
  }
}

.details{
  font-size:12px;
  margin-top:6px;
  opacity:.85;
  text-align:center;
}

.footer{
  text-align:center;
  margin-top:8px;
  font-size:12px;
  opacity:.7;
}
</style>
</head>

<body>
<div class="container">

<h1>PDF âžœ IMAGE CONVERTER</h1>

<div class="intro">
  <div class="terminal-line">[ SYSTEM READY ]</div>
  <div class="tagline">
    Convert PDF pages into <span>PNG</span> & <span>JPEG</span><br>
    Secure â€¢ Offline â€¢ Hacker Green
  </div>
</div>

<div class="divider"></div>

<label class="choose-btn">
  Choose PDF
  <input type="file" id="pdfFile" accept="application/pdf" hidden>
</label>

<button id="proceedBtn" class="hidden">PROCEED FILE</button>

<div id="popup" class="popup hidden"></div>
<div id="spinner" class="spinner hidden"></div>

<div id="output"></div>

</div>

<script>
pdfjsLib.GlobalWorkerOptions.workerSrc=
"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js";

const pdfInput=document.getElementById("pdfFile");
const popup=document.getElementById("popup");
const proceedBtn=document.getElementById("proceedBtn");
const spinner=document.getElementById("spinner");
const output=document.getElementById("output");
let pdfData;

function showPopup(text){
  popup.textContent=text;
  popup.classList.remove("hidden");
  setTimeout(()=>popup.classList.add("hidden"),1500);
}

pdfInput.onchange=()=>{
  showPopup("âœ” PDF Uploaded Successfully");
  proceedBtn.classList.remove("hidden");
  const r=new FileReader();
  r.onload=()=>pdfData=r.result;
  r.readAsArrayBuffer(pdfInput.files[0]);
};

proceedBtn.onclick=async()=>{
  output.innerHTML="";
  spinner.classList.remove("hidden");

  setTimeout(async()=>{
    spinner.classList.add("hidden");
    const pdf=await pdfjsLib.getDocument(new Uint8Array(pdfData)).promise;
    const zipPNG=new JSZip();
    const zipJPG=new JSZip();

    for(let i=1;i<=pdf.numPages;i++){
      const page=await pdf.getPage(i);
      const viewport=page.getViewport({scale:2.5});

      const canvas=document.createElement("canvas");
      const ctx=canvas.getContext("2d");
      canvas.width=viewport.width;
      canvas.height=viewport.height;

      await page.render({canvasContext:ctx,viewport}).promise;

      const png=canvas.toDataURL("image/png");
      const jpg=canvas.toDataURL("image/jpeg",1.0);

      const pngSize=Math.round((png.length*3)/4/1024);
      const jpgSize=Math.round((jpg.length*3)/4/1024);

      const div=document.createElement("div");
      div.className="page";

      const details=document.createElement("div");
      details.className="details";
      details.textContent=
        `Page ${i} | ${canvas.width}x${canvas.height}px | PNG ${pngSize} KB | JPEG ${jpgSize} KB`;

      const btnPNG=document.createElement("button");
      btnPNG.textContent="DOWNLOAD PNG";
      btnPNG.onclick=()=>{
        if(pdf.numPages>1){
          zipPNG.file(`page-${i}.png`,png.split(",")[1],{base64:true});
          showPopup("âœ” PNG Added to ZIP");
        }else{
          download(png,"page.png");
          showPopup("âœ” Download Successfully");
        }
      };

      const btnJPG=document.createElement("button");
      btnJPG.textContent="DOWNLOAD JPEG";
      btnJPG.onclick=()=>{
        if(pdf.numPages>1){
          zipJPG.file(`page-${i}.jpg`,jpg.split(",")[1],{base64:true});
          showPopup("âœ” JPEG Added to ZIP");
        }else{
          download(jpg,"page.jpg");
          showPopup("âœ” Download Successfully");
        }
      };

      const footer=document.createElement("div");
      footer.className="footer";
      footer.textContent="Powered by BAPON BARMON";

      div.append(canvas,details,btnPNG,btnJPG,footer);
      output.appendChild(div);
    }

    if(pdf.numPages>1){
      const allPNG=document.createElement("button");
      allPNG.textContent="DOWNLOAD ALL PNG (ZIP)";
      allPNG.onclick=()=>saveZip(zipPNG,"png-images.zip");

      const allJPG=document.createElement("button");
      allJPG.textContent="DOWNLOAD ALL JPEG (ZIP)";
      allJPG.onclick=()=>saveZip(zipJPG,"jpeg-images.zip");

      output.append(allPNG,allJPG);
    }
  },1600);
};

function download(data,name){
  const a=document.createElement("a");
  a.href=data;a.download=name;a.click();
}
function saveZip(zip,name){
  zip.generateAsync({type:"blob"}).then(b=>{
    const a=document.createElement("a");
    a.href=URL.createObjectURL(b);
    a.download=name;
    a.click();
    showPopup("âœ” ZIP Downloaded Successfully");
  });
}
</script>
</body>
</html>
